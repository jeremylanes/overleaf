"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.locateBinding = void 0;
var tslib_1 = require("tslib");
var os_1 = require("os");
var path_1 = require("path");
var fs_1 = require("fs");
var SupportedPlatforms = new Set(['darwin', 'win32', 'linux']);
function locateBinding(dirname, filename) {
    if (filename === void 0) { filename = 'index'; }
    var platformName = os_1.platform();
    if (!SupportedPlatforms.has(platformName)) {
        throw new TypeError("Unsupported platform: " + platformName + ", only support " + tslib_1.__spread(SupportedPlatforms.values()).join(', '));
    }
    var bindingFilePath = path_1.join(dirname, filename + "." + platformName + ".node");
    if (!fs_1.existsSync(bindingFilePath)) {
        throw new TypeError("Could not find binding file on path " + bindingFilePath);
    }
    return bindingFilePath;
}
exports.locateBinding = locateBinding;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2xvYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEseUJBQTZCO0FBQzdCLDZCQUEyQjtBQUMzQix5QkFBK0I7QUFFL0IsSUFBTSxrQkFBa0IsR0FBRyxJQUFJLEdBQUcsQ0FBa0IsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUE7QUFFakYsU0FBZ0IsYUFBYSxDQUFDLE9BQWUsRUFBRSxRQUFrQjtJQUFsQix5QkFBQSxFQUFBLGtCQUFrQjtJQUMvRCxJQUFNLFlBQVksR0FBRyxhQUFRLEVBQUUsQ0FBQTtJQUMvQixJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFFO1FBQ3pDLE1BQU0sSUFBSSxTQUFTLENBQ2pCLDJCQUF5QixZQUFZLHVCQUFrQixpQkFBSSxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFHLENBQ3JHLENBQUE7S0FDRjtJQUVELElBQU0sZUFBZSxHQUFHLFdBQUksQ0FBQyxPQUFPLEVBQUssUUFBUSxTQUFJLFlBQVksVUFBTyxDQUFDLENBQUE7SUFFekUsSUFBSSxDQUFDLGVBQVUsQ0FBQyxlQUFlLENBQUMsRUFBRTtRQUNoQyxNQUFNLElBQUksU0FBUyxDQUFDLHlDQUF1QyxlQUFpQixDQUFDLENBQUE7S0FDOUU7SUFFRCxPQUFPLGVBQWUsQ0FBQTtBQUN4QixDQUFDO0FBZkQsc0NBZUMifQ==